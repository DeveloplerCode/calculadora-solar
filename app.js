const a0_0x5152df=a0_0x3ef9;(function(_0x41ff5e,_0x2d1290){const _0x2c5847=a0_0x3ef9,_0x5818cf=_0x41ff5e();while(!![]){try{const _0x4e4129=-parseInt(_0x2c5847(0x20f))/0x1*(parseInt(_0x2c5847(0x251))/0x2)+-parseInt(_0x2c5847(0x1f7))/0x3+parseInt(_0x2c5847(0x24d))/0x4*(-parseInt(_0x2c5847(0x21a))/0x5)+parseInt(_0x2c5847(0x248))/0x6+-parseInt(_0x2c5847(0x230))/0x7+-parseInt(_0x2c5847(0x213))/0x8*(-parseInt(_0x2c5847(0x220))/0x9)+parseInt(_0x2c5847(0x219))/0xa;if(_0x4e4129===_0x2d1290)break;else _0x5818cf['push'](_0x5818cf['shift']());}catch(_0x124720){_0x5818cf['push'](_0x5818cf['shift']());}}}(a0_0x457c,0xc1445));import{CalculatorViewModel}from'./src/presentation/viewmodels/CalculatorViewModel.js';const vm=new CalculatorViewModel(),applianceForm=document[a0_0x5152df(0x237)](a0_0x5152df(0x25c)),applianceList=document[a0_0x5152df(0x237)](a0_0x5152df(0x22f)),btnGetLocation=document[a0_0x5152df(0x237)](a0_0x5152df(0x232)),btnCalculate=document['getElementById'](a0_0x5152df(0x210)),resultsDiv=document[a0_0x5152df(0x237)](a0_0x5152df(0x1fc)),hspInfo=document[a0_0x5152df(0x237)](a0_0x5152df(0x250)),batteryTypeSelect=document[a0_0x5152df(0x237)]('batteryType'),batteryIndicator=document['getElementById'](a0_0x5152df(0x222));function a0_0x457c(){const _0x58535c=['20QUtpKx','performCalculation','systemVoltage','resNumBat','GEL\x20/\x20AGM','removeApp','135XbjYze','Error\x20al\x20obtener\x20ubicación.\x20Se\x20usarán\x20valores\x20manuales.','batteryIndicator','requiredWp','<i\x20class=\x22fas\x20fa-map-marker-alt\x22></i>\x20Ubicación\x20Detectada','Ah\x20(','h\x20x\x20','map','resSubWh','month','resBatConfig','subTotalWh','reset','display',')\x0a\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x20gap:\x2015px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span>','applianceList','2336159oJoRqg','mpptAmperage','btnGetLocation','appHours','\x20h</span>','appPower','gel','getElementById','batteryType','\x0a\x20\x20\x20\x20<div\x20class=\x22appliance-item\x20animate-fade\x22>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<strong>','addAppliance','preventDefault','%</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-weight:\x20700;\x20font-size:\x200.9rem;\x22\x20','ceil','LITIO\x20LFP','constructor','\x20Paralelo','totalWh','</strong>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22font-size:\x200.8rem;\x20color:\x20var(--text-muted);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20(','change','\x20Wh/día</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22removeApp(','coords','panelPower','className','339660nyUoTS','scrollIntoView','calculateHSP','V</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','socTableContainer','1039460NkRTfA','toLocaleString','GEL','hspInfo','514566tQiXLH','click','innerText','\x20de\x20','appliances','inverter','\x20Wp','latitude','appPeak','toFixed','block','applianceForm','checked','recommendedPower','resVoltage','geolocation','name','2469735CWwjgN','addEventListener','resMPPT','appName','innerHTML','results','submit','controller','<i\x20class=\x22fas\x20fa-map-marker-alt\x22></i>\x20Detectar\x20Ubicación\x20(GPS)','\x20módulos\x20de\x20','solar','toString','batteriesInSeries','search','batteryUnitAh','numPanels','value','litio','battery','Obteniendo...','\x20Wh','consumption','quantity','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22soc-item\x22\x20style=\x22background:\x20rgba(255,255,255,0.05);\x20padding:\x2010px;\x20border-radius:\x208px;\x20text-align:\x20center;\x20border:\x201px\x20solid\x20rgba(255,255,255,0.1);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x200.7rem;\x20color:\x20var(--text-muted);\x22>','2PnKkBw','btnCalculate','style=\x22color:#ef5350\x22','<span\x20class=\x22badge\x20badge-yellow\x22>Mes\x20Crítico:\x20','166776QRygbg','Litio','resTotalWh','smooth','hours','dailyConsumption','31333140mqXJEm'];a0_0x457c=function(){return _0x58535c;};return a0_0x457c();}function updateBatteryIndicator(){const _0x37929c=a0_0x5152df,_0x2b84ee=(function(){let _0x25d128=!![];return function(_0x3b78a6,_0x3f92af){const _0x43b727=_0x25d128?function(){if(_0x3f92af){const _0x2af240=_0x3f92af['apply'](_0x3b78a6,arguments);return _0x3f92af=null,_0x2af240;}}:function(){};return _0x25d128=![],_0x43b727;};}()),_0x2ae111=_0x2b84ee(this,function(){const _0x523613=a0_0x3ef9;return _0x2ae111[_0x523613(0x202)]()[_0x523613(0x204)]('(((.+)+)+)+$')[_0x523613(0x202)]()[_0x523613(0x23f)](_0x2ae111)[_0x523613(0x204)]('(((.+)+)+)+$');});_0x2ae111();const _0x5a8d84=batteryTypeSelect[_0x37929c(0x207)];batteryIndicator[_0x37929c(0x253)]=_0x5a8d84===_0x37929c(0x214)?_0x37929c(0x23e):_0x37929c(0x21e),batteryIndicator[_0x37929c(0x247)]='battery-badge\x20'+(_0x5a8d84===_0x37929c(0x214)?_0x37929c(0x208):_0x37929c(0x236));}function a0_0x3ef9(_0x371669,_0x33abb0){_0x371669=_0x371669-0x1f2;const _0x30d1e5=a0_0x457c();let _0x34d08c=_0x30d1e5[_0x371669];return _0x34d08c;}batteryTypeSelect['addEventListener'](a0_0x5152df(0x243),updateBatteryIndicator),updateBatteryIndicator(),applianceForm[a0_0x5152df(0x1f8)](a0_0x5152df(0x1fd),_0x8ef92=>{const _0x331566=a0_0x5152df;_0x8ef92[_0x331566(0x23b)]();const _0x5d3329={'name':document['getElementById'](_0x331566(0x1fa))['value'],'power':document[_0x331566(0x237)](_0x331566(0x235))[_0x331566(0x207)],'hours':document[_0x331566(0x237)](_0x331566(0x233))[_0x331566(0x207)],'quantity':document[_0x331566(0x237)]('appQty')['value'],'hasPeak':document['getElementById'](_0x331566(0x259))[_0x331566(0x1f2)]};vm[_0x331566(0x23a)](_0x5d3329),renderAppliances(),applianceForm[_0x331566(0x22c)]();}),btnGetLocation[a0_0x5152df(0x1f8)](a0_0x5152df(0x252),()=>{const _0x41ce99=a0_0x5152df;navigator[_0x41ce99(0x1f5)]&&(btnGetLocation['innerText']=_0x41ce99(0x20a),navigator[_0x41ce99(0x1f5)]['getCurrentPosition'](_0x41f01e=>{const _0x4ec7a3=_0x41ce99,{latitude:_0xefe6a4,longitude:_0x4ed9ff}=_0x41f01e[_0x4ec7a3(0x245)];document[_0x4ec7a3(0x237)](_0x4ec7a3(0x258))['value']=_0xefe6a4['toFixed'](0x4),document['getElementById']('longitude')['value']=_0x4ed9ff[_0x4ec7a3(0x25a)](0x4);const _0x32cb58=vm[_0x4ec7a3(0x24a)](_0xefe6a4);hspInfo['innerHTML']=_0x4ec7a3(0x212)+_0x32cb58[_0x4ec7a3(0x229)]+'</span>\x20HSP:\x20<span\x20class=\x22result-value\x22>'+_0x32cb58['dailyHSP']+_0x4ec7a3(0x234),btnGetLocation['innerHTML']=_0x4ec7a3(0x224);},()=>{const _0x170c84=_0x41ce99;alert(_0x170c84(0x221)),btnGetLocation['innerHTML']=_0x170c84(0x1ff);}));}),btnCalculate['addEventListener'](a0_0x5152df(0x252),()=>{const _0x1a1971=a0_0x5152df;try{const _0x5a5fc7={'batteryType':document[_0x1a1971(0x237)](_0x1a1971(0x238))[_0x1a1971(0x207)],'safetyFactor':parseFloat(document['getElementById']('safetyFactor')[_0x1a1971(0x207)]),'panelPower':parseFloat(document['getElementById'](_0x1a1971(0x246))[_0x1a1971(0x207)]),'batteryUnitAh':parseFloat(document[_0x1a1971(0x237)](_0x1a1971(0x205))['value'])},_0x58ef88=vm[_0x1a1971(0x21b)](_0x5a5fc7);displayResults(_0x58ef88);}catch(_0x303050){alert(_0x303050['message']);}});function renderAppliances(){const _0x360abe=a0_0x5152df;applianceList[_0x360abe(0x1fb)]=vm[_0x360abe(0x255)][_0x360abe(0x227)]((_0xe7d4,_0x3dd805)=>_0x360abe(0x239)+_0xe7d4[_0x360abe(0x1f6)]+_0x360abe(0x242)+_0xe7d4['power']+'W\x20x\x20'+_0xe7d4[_0x360abe(0x217)]+_0x360abe(0x226)+_0xe7d4[_0x360abe(0x20d)]+_0x360abe(0x22e)+_0xe7d4[_0x360abe(0x218)]+_0x360abe(0x244)+_0x3dd805+')\x22\x20style=\x22padding:\x205px\x2010px;\x20background:\x20#ef4444;\x20width:\x20auto;\x20font-size:\x200.8rem;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20')['join']('');}window[a0_0x5152df(0x21f)]=_0x438582=>{vm['removeAppliance'](_0x438582),renderAppliances();};function displayResults(_0x370522){const _0x206617=a0_0x5152df;resultsDiv['style'][_0x206617(0x22d)]=_0x206617(0x25b),resultsDiv[_0x206617(0x249)]({'behavior':_0x206617(0x216)}),document['getElementById'](_0x206617(0x228))[_0x206617(0x253)]=_0x370522[_0x206617(0x20c)][_0x206617(0x22b)]['toLocaleString']()+'\x20Wh',document[_0x206617(0x237)](_0x206617(0x215))[_0x206617(0x253)]=_0x370522[_0x206617(0x20c)][_0x206617(0x241)][_0x206617(0x24e)]()+_0x206617(0x20b),document[_0x206617(0x237)]('resReqWp')['innerText']=_0x370522[_0x206617(0x201)][_0x206617(0x223)][_0x206617(0x25a)](0x0)+_0x206617(0x257),document['getElementById']('resNumPanels')[_0x206617(0x253)]=_0x370522[_0x206617(0x201)][_0x206617(0x206)]+_0x206617(0x200)+_0x370522[_0x206617(0x201)][_0x206617(0x246)]+'W',document[_0x206617(0x237)](_0x206617(0x1f4))[_0x206617(0x253)]=_0x370522[_0x206617(0x209)]['systemVoltage']+'\x20V',document[_0x206617(0x237)](_0x206617(0x22a))[_0x206617(0x253)]=_0x370522[_0x206617(0x209)][_0x206617(0x203)]+'\x20Serie\x20x\x20'+_0x370522[_0x206617(0x209)]['batteriesInParallel']+_0x206617(0x240),document['getElementById'](_0x206617(0x21d))['innerText']=_0x370522['battery']['numBatteries']+_0x206617(0x254)+document['getElementById']('batteryUnitAh')[_0x206617(0x207)]+_0x206617(0x225)+_0x370522['battery'][_0x206617(0x238)]+')',document['getElementById']('resInvPower')[_0x206617(0x253)]=Math[_0x206617(0x23d)](_0x370522[_0x206617(0x256)][_0x206617(0x1f3)])+'\x20W',document['getElementById'](_0x206617(0x1f9))[_0x206617(0x253)]=_0x370522[_0x206617(0x1fe)][_0x206617(0x231)]+'\x20A';const _0x2675c0=document['getElementById'](_0x206617(0x24c));let _0x5e8f82=0x0,_0x1b8830=0x0;if(_0x370522[_0x206617(0x209)]['systemVoltage']===0xc)_0x5e8f82=0xb,_0x1b8830=14.4;else{if(_0x370522[_0x206617(0x209)][_0x206617(0x21c)]===0x18)_0x5e8f82=0x18,_0x1b8830=30.8;else _0x370522[_0x206617(0x209)][_0x206617(0x21c)]===0x30&&(_0x370522['battery'][_0x206617(0x238)]===_0x206617(0x24f)?(_0x5e8f82=0x2d,_0x1b8830=0x39):(_0x5e8f82=0x2c,_0x1b8830=0x35));}const _0x21b5c1=[0xa,0x14,0x1e,0x28,0x32,0x3c,0x46,0x50,0x5a,0x64];_0x2675c0['innerHTML']=_0x21b5c1[_0x206617(0x227)](_0x8d981b=>{const _0x9eb700=_0x206617,_0x50f408=_0x5e8f82+_0x8d981b*(_0x1b8830-_0x5e8f82)/0x64,_0x4dae77=_0x8d981b<=0x14?_0x9eb700(0x211):'';return _0x9eb700(0x20e)+_0x8d981b+_0x9eb700(0x23c)+_0x4dae77+'>'+_0x50f408[_0x9eb700(0x25a)](0x1)+_0x9eb700(0x24b);})['join']('');}